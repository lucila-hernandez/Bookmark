{% extends "base.html" %}
{% block body_class %}search-results{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="mb-4">Search Results</h1>
    {% if books %}
        <div class="list-group">
            {% for book in books %}
                <div class="list-group-item mb-4">
                    <h2 class="h5">{{ book.volumeInfo.title }}</h2>
                    <p><strong>Authors:</strong> {{ book.volumeInfo.authors | join(', ') }}</p>
                    <p><strong>Publish Date:</strong> {{ book.volumeInfo.publishedDate }}</p>
                    
                    <button class="btn btn-info" onclick="toggleDetails('book-{{ loop.index }}')">View Details</button>
                    
                    <div id="book-{{ loop.index }}" class="book-details" style="display:none;">
                        <p><strong>Description:</strong> {{ book.volumeInfo.description or 'No description available.' }}</p>
                        {% if book.volumeInfo.imageLinks %}
                            <img src="{{ book.volumeInfo.imageLinks.thumbnail }}" alt="Book cover" class="img-fluid">
                        {% endif %}
                        <a href="{{ book.volumeInfo.infoLink }}" target="_blank" class="btn btn-primary mt-3">View on Google Books</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>No results found. Please try again.</p>
    {% endif %}
    <a class="btn btn-secondary mt-3" href="/">Back to search</a>
</div>
{% endblock %}
